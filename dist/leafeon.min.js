!function(t,n){"object"==typeof exports&&"object"==typeof module?module.exports=n():"function"==typeof define&&define.amd?define([],n):"object"==typeof exports?exports.leafeon=n():t.leafeon=n()}(this,function(){return function(t){function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}var e={};return n.m=t,n.c=e,n.i=function(t){return t},n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:o})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=0)}([function(t,n,e){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var e in n)n.hasOwnProperty(e)&&(t[e]=n[e])};return function(n,e){function o(){this.constructor=n}t(n,e),n.prototype=null===e?Object.create(e):(o.prototype=e.prototype,new o)}}();Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.getURI=function(){return t.URI=t.windowObj.location.href.split("#")[1]||"/"},this.setURI=function(n){t.windowObj.location.hash=n},this.WindowListener=function(t){"undefined"!=typeof window&&(window.onpopstate=function(){t()})},this.windowObj="undefined"==typeof window?{location:{href:"/#/"}}:window,this.URI=this.getURI()}return t}(),u=function(t){function n(){var n=t.call(this)||this;return n.setErrorCallback=function(t){return n.notFoundCallback=t,n},n.notFoundException=function(){n.notFoundCallback.apply(null,[])},n.before=function(t,e){return n.BeforeRouteMiddleware=t,n.BeforeRouteMiddlewareFunc=e,n},n.add=function(t,e,o){var r=e.split("/"),u=!1,a=[];return r.forEach(function(t){":"===t.substr(0,1)&&(u=!0,a.push(t.substr(1,t.length)))}),n.paramsEnabled=u,e=e.split("#")[1]||e,n.routes.push({name:t,path:e,callback:o,paramsEnabled:u,params:a}),n},n.map=function(t,e,o){return o.forEach(function(o){n.add(t+o.name,e+n.FormatPath(o.path,!0),o.callback)}),n},n.fetchRoute=function(t,e){var o=n.routes.find(function(n){return n.name===t||n.path===t});if(void 0==o)return n.Exception("Route "+t+" does not exist.");if(!o.paramsEnabled)return void n.setURI(o.path);e||n.Exception('Error: route "'+t+'" requires some parameters. None specified.');var r=n.generateURL(o.path,e);n.setURI(r)},n.generateURL=function(t,n){var e=t;for(var o in n)!function(o){var r=t.split("/").find(function(t){return t===":"+o});if(void 0==r)return"continue";e=e.replace(r,n[o])}(o);return e},n.FormatPath=function(t,n){return void 0===n&&(n=!1),n&&"/"===t?t="":n||"/"!==t.substr(0,1)||(t=t.substr(1)),t},n.setRoute=function(t,e){void 0===e&&(e=[]),n.route=t,n.routeCall=t.callback,n.params=e,n.notfound=!1},n.handle=function(t){var e=n.getURI();t.forEach(function(t){var o=t.path.split("/");if(e.split("/").length===o.length){var r=n.handlingParams(t.path);return r.RouteString===e&&n.notfound?n.setRoute(t,r.params):void 0}})},n.handlingParams=function(t){for(var e=n.getURI().split("/"),o=t.split("/"),r=[],u=0;u<o.length;u++)":"===o[u].substr(0,1)&&(""!==e[u]&&r.push(e[u]),o[u]=e[u]);return{params:r,RouteString:o.join("/")}},n.run=function(t){var e=n.getURI(),o=[];n.notfound=!0,n.BeforeMiddleware(n.BeforeRouteMiddleware,n.BeforeRouteMiddlewareFunc),n.routes.forEach(function(t){t.paramsEnabled?(o.push(t),n.handle(o)):t.path===e&&n.setRoute(t)}),n.notfound?n.notFoundException():n.routeCall.apply(null,n.params),null!=t?(n.AfterRouteCallback=t,n.AfterRouteCallback.apply(null,[])):null!=n.AfterRouteCallback&&n.AfterRouteCallback.apply(null,[])},n.BeforeMiddleware=function(t,e){if(t=t.split("#")[1]||t,null!=e){if("*"===t)return e.apply(null,[]);if(t===n.getURI())return e.apply(null,[])}},n.Exception=function(t){throw new TypeError(t)},n.notfound=!1,n.routes=[],n.paramsEnabled=!1,n.params=[],n.BeforeRouteMiddleware="*",n.routeCall=function(){},n.BeforeRouteMiddlewareFunc=function(){},n.AfterRouteCallback=function(){},n.route={},n.notFoundCallback=function(){},n.WindowListener(n.run),n}return o(n,t),n}(r);n.router=u}])});