"use strict";var _this3;function _typeof(a){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}function _defineProperties(a,b){for(var c,d=0;d<b.length;d++)c=b[d],c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(a,c.key,c)}function _createClass(a,b,c){return b&&_defineProperties(a.prototype,b),c&&_defineProperties(a,c),a}function _possibleConstructorReturn(a,b){return b&&("object"===_typeof(b)||"function"==typeof b)?b:_assertThisInitialized(a)}function _assertThisInitialized(a){if(void 0===a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function _getPrototypeOf(a){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(a){return a.__proto__||Object.getPrototypeOf(a)},_getPrototypeOf(a)}function _inherits(a,b){if("function"!=typeof b&&null!==b)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(b&&b.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),b&&_setPrototypeOf(a,b)}function _setPrototypeOf(a,b){return _setPrototypeOf=Object.setPrototypeOf||function(a,b){return a.__proto__=b,a},_setPrototypeOf(a,b)}function _classCallCheck(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(exports,"__esModule",{value:!0});var RouterRequest=function a(){var b=this;_classCallCheck(this,a),this.getURI=function(){return"#/"===location.hash.substr(0,2)&&(b.URI=location.hash.substr(1)),b.URI},this.setURI=function(a){location.hash=a},this.URI="/"+location.hash},leafeon=function(a){function b(){var a;return _classCallCheck(this,b),a=_possibleConstructorReturn(this,_getPrototypeOf(b).call(this)),a.getCurrentURI=function(){return a.getURI()},a.setErrorCallback=function(b){a.notFoundCallback=b},a.notFoundException=function(){a.notFoundCallback.apply(null,[])},a.before=function(b,c){a.BeforeRouteMiddleware=b,a.BeforeRouteMiddlewareFunc=c},a.map=function(b,c){var d=2<arguments.length&&void 0!==arguments[2]?arguments[2]:[];d.forEach(function(d){a.add(b+d.name,c+a.FormatPath(d.path,!0),d.callback)})},a.fetchRoute=function(b,c){var d=a.routes.find(function(a){return a.name===b||a.path===b});if(!d.paramsEnabled)return void a.setURI(d.path);c||a.Exception("Error: route \""+b+"\" requires some parameters. None specified.");var e=a.GenerateURL(d.path,c);a.setURI(e)},a.GenerateURL=function(a,b){var c=a,d=function(d){if(!b.hasOwnProperty(d))return"continue";var e=a.split("/").find(function(a){return a===":"+d});c=c.replace(e,b[d])};for(var e in b){var f=d(e)}return c},a.FormatPath=function(a){var b=!!(1<arguments.length&&void 0!==arguments[1])&&arguments[1];return b&&"/"===a?a="":!b&&"/"===a.substr(0,1)&&(a=a.substr(1)),a},a.setRoute=function(b){var c=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];a.route=b,a.routeCall=b.callback,a.params=c,a.notfound=!1},a.handle=function(b){var c=a.getCurrentURI();b.forEach(function(b){var d=b.split("/"),e=c.split("/");if(e.length===d.length){var f=a.handlingParams(b),g=e.join("");f.RouteString!==g||a.routes.forEach(function(c){c.path===b&&a.notfound&&a.setRoute(c,f.params)})}})},a.run=function(b){var c=a.getCurrentURI(),d=[];a.notfound=!0,a.BeforeMiddleware(a.BeforeRouteMiddleware,a.BeforeRouteMiddlewareFunc),a.routes.forEach(function(b){b.paramsEnabled?(d.push(b.path),a.handle(d)):b.path===c&&a.setRoute(b)}),a.notfound?a.notFoundException():a.routeCall.apply(null,a.params),null==b?null!=a.AfterRouteCallback&&a.AfterRouteCallback.apply(null,[]):(a.AfterRouteCallback=b,a.AfterRouteCallback.apply(null,[]))},a.BeforeMiddleware=function(b,c){var d=a.getURI();switch(b.substr(0,2)){case"#/":b=b.substr(1);break;case"/#":b=b.substr(2);}null!=c&&("*"===b?c.apply(null,[]):b===d&&c.apply(null,[]))},a.handlingParams=function(b){for(var c=a.getCurrentURI().split("/"),d=b.split("/"),e=[],f=0;f<d.length;f++)":"===d[f].substr(0,1)&&(""!==c[f]&&e.push(c[f]),d[f]=c[f]);return{params:e,RouteString:d.join("")}},a.Exception=function(a){throw new TypeError(a)},a.notfound=!1,a.routes=[],a.paramsEnabled=!1,a.params=[],a.BeforeRouteMiddleware="*",a.routeCall=function(){},a.BeforeRouteMiddlewareFunc=function(){},a.AfterRouteCallback=function(){},a.route={},a.notFoundCallback=function(){throw new TypeError("404 error.")},a}return _inherits(b,a),_createClass(b,[{key:"add",value:function(a,b,c){var d=b.split("/"),e=!1,f=[];switch(d.forEach(function(a){":"===a.substr(0,1)&&(e=!0,f.push(a.substr(1,a.length)))}),this.paramsEnabled=e,b.substr(0,2)){case"#/":b=b.substr(1);break;case"/#":b=b.substr(2);}this.routes.push({name:a,path:b,callback:c,paramsEnabled:e,params:f})}}]),b}(RouterRequest);exports.default=leafeon,window.addEventListener("hashchange",function(){_this3.run()}),module.exports=exports.default;