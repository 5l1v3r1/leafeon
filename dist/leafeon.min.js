!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.leafeon=e():t.leafeon=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,o){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:o})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";var o=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){var t=this;this.getURI=function(){return t.URI=t.windowObj.location.href.split("#")[1]||"/"},this.setURI=function(e){"undefined"!=typeof window?window.location.hash=e:t.windowObj.location.hash=e},this.windowListener=function(t){"undefined"!=typeof window&&(window.onpopstate=function(){t()})};var e={location:{href:"/#/",hash:"#/"}};this.windowObj="undefined"==typeof window?e:window,this.URI=this.getURI()}return t}(),a=function(t){function e(){var e=t.call(this)||this;return e.setErrorCallback=function(t){return e.notFoundCallback=t,e},e.notFoundException=function(){e.notFoundCallback.apply(null,[])},e.before=function(t,n){return e.beforeRouteMiddleware=t,e.beforeRouteMiddlewareFunc=n,e},e.add=function(t,n,o){var r=n.split("/"),a=!1,u=[];return r.forEach(function(t){":"===t.substr(0,1)&&(a=!0,u.push(t.substr(1,t.length)))}),e.paramsEnabled=a,n=n.split("#")[1]||n,e.routes.push({name:t,path:n,callback:o,paramsEnabled:a,params:u}),e},e.map=function(t,n,o){return o.forEach(function(o){e.add(t+o.name,n+e.formatPath(o.path),o.callback)}),e},e.fetchRoute=function(t,n){var o=e.routes.find(function(e){return e.name===t||e.path===t});if(void 0===o)return e.exception("Route "+t+" does not exist.");if(!o.paramsEnabled)return void e.setURI(o.path);n||e.exception('Error: route "'+t+'" requires some parameters. None specified.');var r=e.generateURL(o.path,n);e.setURI(r)},e.generateURL=function(t,e){var n=t;return Object.keys(e).forEach(function(o){var r=t.split("/").find(function(t){return t===":"+o});void 0!==r&&(n=n.replace(r,e[o]))}),n},e.formatPath=function(t){return t.match(/^(?:\/)?(?:\#)?(?:\/)?[a-zA-Z\-_\/:]+/)[0]!==t&&e.exception("Path is not formated correctly."),t.replace(/^(?:\/)?(?:\#)?(?:\/)/,"/")},e.setRoute=function(t,n){void 0===n&&(n=[]),e.route=t,e.routeCall=t.callback,e.params=n,e.notfound=!1},e.handle=function(t){var n=e.getURI();t.forEach(function(t){var o=t.path.split("/");if(n.split("/").length===o.length){var r=e.handlingParams(t.path);return r.RouteString===n&&e.notfound?e.setRoute(t,r.params):void 0}})},e.handlingParams=function(t){for(var n=e.getURI().split("/"),o=t.split("/"),r=[],a=0;a<o.length;a++)":"===o[a].substr(0,1)&&(""!==n[a]&&r.push(n[a]),o[a]=n[a]);return{params:r,RouteString:o.join("/")}},e.run=function(t){var n=e.getURI(),o=[];e.notfound=!0,e.beforeMiddleware(e.beforeRouteMiddleware,e.beforeRouteMiddlewareFunc),e.routes.forEach(function(t){t.paramsEnabled?(o.push(t),e.handle(o)):t.path===n&&e.setRoute(t)}),e.notfound?e.notFoundException():e.routeCall.apply(null,e.params),null!=t?(e.afterRouteCallback=t,e.afterRouteCallback.apply(null,[])):null!=e.afterRouteCallback&&e.afterRouteCallback.apply(null,[])},e.beforeMiddleware=function(t,n){if(t=t.split("#")[1]||t,null!=n){if("*"===t)return n.apply(null,[]);if(t===e.getURI())return n.apply(null,[])}},e.exception=function(t){throw new TypeError(t)},e.notfound=!1,e.routes=[],e.paramsEnabled=!1,e.params=[],e.beforeRouteMiddleware="*",e.routeCall=function(){},e.beforeRouteMiddlewareFunc=function(){},e.afterRouteCallback=function(){},e.route={},e.notFoundCallback=function(){},e.windowListener(e.run),e}return o(e,t),e}(r);e.Router=a}])});